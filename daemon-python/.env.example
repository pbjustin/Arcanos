# ARCANOS Configuration
# Copy this file to .env and fill in your values

# ============================================
# REQUIRED
# ============================================

# OpenAI API Key (get from https://platform.openai.com/api-keys)
# NEVER commit your real API key to version control
OPENAI_API_KEY=

# ============================================
# OPTIONAL - Backend
# ============================================

# Backend API URL (Railway deployment)
BACKEND_URL=https://your-app.railway.app

# Backend authentication (generated after login)
# NEVER commit your real backend token to version control
BACKEND_TOKEN=
BACKEND_LOGIN_EMAIL=

# Backend JWT verification (optional - for signature verification)
# Set one of these to enable JWT signature verification:
# BACKEND_JWT_SECRET=your-shared-secret-for-hs256
# BACKEND_JWT_PUBLIC_KEY=your-rs256-public-key
# BACKEND_JWT_JWKS_URL=https://your-backend.com/.well-known/jwks.json

# Allow HTTP for backend URL (default: false, only for localhost/dev)
# WARNING: Only set to true in secure development environments
BACKEND_ALLOW_HTTP=false

# Backend routing (local | backend | hybrid)
BACKEND_ROUTING_MODE=hybrid

# Prefixes that force backend routing in hybrid mode (comma-separated)
BACKEND_DEEP_PREFIXES=deep:,backend:

# Fallback to local GPT if backend fails in hybrid mode
BACKEND_FALLBACK_TO_LOCAL=true

# Backend request timeout in seconds
BACKEND_REQUEST_TIMEOUT=15

# Send update events to backend /api/update
BACKEND_SEND_UPDATES=true

# Optional backend model overrides (omit to use backend defaults)
BACKEND_CHAT_MODEL=
BACKEND_VISION_MODEL=
BACKEND_TRANSCRIBE_MODEL=

# Max local history entries sent with backend requests
BACKEND_HISTORY_LIMIT=8

# Default backend routing for vision/transcription commands
BACKEND_VISION_ENABLED=false
BACKEND_TRANSCRIBE_ENABLED=false

# When route would be backend, use backend only if confidence >= this (0.0â€“1.0). Else local.
# 0.5 = balanced; lower = more local; higher = more backend.
BACKEND_CONFIDENCE_THRESHOLD=0.5

# ============================================
# OPTIONAL - Rate Limiting
# ============================================

# Maximum requests per hour (default: 60)
MAX_REQUESTS_PER_HOUR=60

# Maximum tokens per day (default: 100000)
MAX_TOKENS_PER_DAY=100000

# Maximum cost per day in USD (default: 10.0)
MAX_COST_PER_DAY=10.0

# ============================================
# OPTIONAL - Features
# ============================================

# Enable telemetry (anonymous crash reports/analytics)
# Set to true to opt-in, false to opt-out
TELEMETRY_ENABLED=false

# Sentry DSN for crash reporting (only if TELEMETRY_ENABLED=true)
SENTRY_DSN=

# Enable auto-start on Windows login
AUTO_START=false

# Enable voice commands by default
VOICE_ENABLED=true

# Speak responses aloud after replies (TTS)
SPEAK_RESPONSES=false

# Enable vision commands by default
VISION_ENABLED=true

# GitHub repo for update checks (owner/repo, e.g. myorg/arcanos-hybrid)
# When set, run 'update' to download and install newer releases
GITHUB_RELEASES_REPO=

# ============================================
# OPTIONAL - Advanced
# ============================================

# OpenAI model for conversation (default: gpt-4o-mini)
OPENAI_MODEL=gpt-4o-mini

# OpenAI model for vision (default: gpt-4o)
OPENAI_VISION_MODEL=gpt-4o

# OpenAI model for speech-to-text (default: whisper-1)
OPENAI_TRANSCRIBE_MODEL=whisper-1

# Temperature for AI responses (0.0-2.0, default: 0.7)
TEMPERATURE=0.7

# Max tokens per response (default: 500)
MAX_TOKENS=500

# Request timeout in seconds (default: 30)
REQUEST_TIMEOUT=30

# Shell override for terminal execution (powershell, cmd, bash, sh, zsh, etc.)
ARCANOS_SHELL=

# ============================================
# OPTIONAL - Storage
# ============================================

# Memory file location
MEMORY_FILE=memories.json

# Log directory
LOG_DIR=logs

# Screenshot directory
SCREENSHOT_DIR=screenshots

# ============================================
# OPTIONAL - Logging
# ============================================

# Log level for daemon logs (error, warn, info, debug)
LOG_LEVEL=info

# Override path for instrumentation debug log (default: LOG_DIR/debug.log). Set to absolute path for portability.
# DEBUG_LOG_PATH=

# ============================================
# OPTIONAL - Security
# ============================================

# Run shell commands elevated (UAC on Windows, sudo on macOS/Linux). Prompt per run when required.
# Set true so admin-required tasks work without "run as admin" for the whole daemon.
RUN_ELEVATED=false

# Prompt "Do you confirm this action?" before sensitive daemon commands (run, mouse, keyboard, etc.). Set false to skip.
CONFIRM_SENSITIVE_ACTIONS=true

# Allow dangerous terminal commands (default: false)
# WARNING: Setting to true allows rm -rf, del, etc.
ALLOW_DANGEROUS_COMMANDS=false

# Command whitelist (comma-separated, overrides blacklist)
COMMAND_WHITELIST=

# Additional command blacklist (comma-separated)
COMMAND_BLACKLIST=format,cipher,takeown

# ============================================
# OPTIONAL - UI
# ============================================

# Color scheme (dark, light, auto)
COLOR_SCHEME=dark

# Show welcome message on startup
SHOW_WELCOME=true

# Show statistics after each request
SHOW_STATS=true


# ============================================
# IDE / debug
# ============================================
# Set IDE_AGENT_DEBUG=1 or DAEMON_DEBUG_PORT=9999 to expose a local debug API for IDE agents and scripts
IDE_AGENT_DEBUG=false
DAEMON_DEBUG_PORT=0

# Automation secret for one-time token issuance / IDE debug access
ARCANOS_AUTOMATION_SECRET=

# Optional custom automation header name (default: x-arcanos-automation)
ARCANOS_AUTOMATION_HEADER=x-arcanos-automation

# One-time confirmation token TTL (ms or minutes)
ARCANOS_CONFIRM_TOKEN_TTL_MS=600000
# ARCANOS_CONFIRM_TOKEN_TTL_MINUTES=10

# Debug Server Authentication Token (REQUIRED for security)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Without this token, the debug server will reject requests to prevent RCE vulnerabilities
# NEVER commit your real debug token to version control
DEBUG_SERVER_TOKEN=

# Allow unauthenticated access (NOT RECOMMENDED - only for secure development environments)
# WARNING: Setting to true disables authentication and exposes the server to RCE attacks
DEBUG_SERVER_ALLOW_UNAUTHENTICATED=false

# Allow token-in-query for debug server (default: false, headers-only auth)
# WARNING: Query parameters can appear in logs/proxies. Only enable for development.
DEBUG_SERVER_ALLOW_QUERY_TOKEN=false

# Debug server rate limit (requests per minute per IP, default: 60)
DEBUG_SERVER_RATE_LIMIT=60

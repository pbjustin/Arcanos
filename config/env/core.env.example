# ================================
# ARCANOS BACKEND CONFIGURATION
# ================================
# Complete environment configuration for the Arcanos AI-controlled backend
# Copy the required sections into your .env file.

# ================================
# CORE SYSTEM CONFIGURATION
# ================================

# Node.js Runtime Environment
# Values: development | production | test
NODE_ENV=development

# Server Port Configuration
# Default: 8080 when unset (see APPLICATION_CONSTANTS.DEFAULT_PORT in code)
# Railway: Automatically set by Railway via $PORT environment variable
PORT=8080

# Server Host Binding
# Default in development: 127.0.0.1 (localhost only)
# Default in production: 0.0.0.0 (all network interfaces)
# Override with HOST=0.0.0.0 in development if you need network access from:
#   - Other devices on your network
#   - Docker containers accessing the host
#   - WSL2 environments requiring host network access
# HOST=0.0.0.0

# Default Port for Railway Deployment Validation 
# Used by PR Assistant for Railway readiness checks
DEFAULT_PORT=8080

# ================================
# API SERVER CONFIGURATION
# ================================

# Request Handling Configuration
# JSON payload size limit (default: 10mb)
JSON_LIMIT=10mb

# Request timeout in milliseconds (default: 30000ms = 30 seconds)
REQUEST_TIMEOUT=30000

# CORS Configuration
# Comma-separated list of allowed origins for production (default: all origins in development)
# Example: ALLOWED_ORIGINS=https://example.com,https://api.example.com
# ALLOWED_ORIGINS=

# ================================
# STORAGE & PERSISTENCE
# ================================

# Database Configuration
# PostgreSQL connection string - OPTIONAL (uses in-memory fallback if not set)
# Format: postgresql://username:password@hostname:port/database
# DATABASE_URL=postgresql://arcanos:arcanos@localhost:5432/arcanos

# File System Storage Paths
# Directory for ARCANOS log files (session.log, audit.log, etc.)
# Default: /tmp/arc/log (fallback if /var/arc/log not accessible)
ARC_LOG_PATH=/tmp/arc/log

# Directory for ARCANOS memory files and cache
# Default: /tmp/arc/memory (used for in-memory fallback storage)
ARC_MEMORY_PATH=/tmp/arc/memory

# Optional session cache TTL for request routing (milliseconds)
# SESSION_CACHE_TTL_MS=300000

# Dataset harvester log directory (defaults to ./logs)
# ARC_DATASET_LOG_PATH=./logs

# ================================
# WORKER SYSTEM CONFIGURATION
# ================================

# Enable Background Workers
# Set to 'true' or '1' to enable AI-controlled CRON jobs
# Set to 'false' to run only the API server
RUN_WORKERS=true

# Worker Process Configuration
# Number of worker processes to spawn
WORKER_COUNT=4

# Worker-Specific Model (defaults to AI_MODEL / FINETUNED_MODEL_ID when not set; set in Railway or .env)
# WORKER_MODEL=

# Worker API Timeout (milliseconds)
# Timeout for worker API calls to prevent hanging processes
WORKER_API_TIMEOUT_MS=60000

# Worker Logic Implementation
# Internal worker orchestration mode
WORKER_LOGIC=arcanos

# Optional override for the workers directory
# WORKERS_DIRECTORY=./workers

# Server URL for Worker Communication
# Used for internal worker-to-server communication
SERVER_URL=http://localhost:8080
# Backend status endpoint path (used for health/status checks)
BACKEND_STATUS_ENDPOINT=/status
